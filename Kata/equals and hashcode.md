---
tags:
  - kata
  - java
  - core
  - oop
---
**Хеш-код** - это целочисленный результат работы метода, которому в качестве входного параметра передан объект.

Если более точно, то это битовая строка фиксированной длины, полученная из массива произвольной длины.

**Equals** - это метод, определенный в Object, который служит для сравнения объектов. При сравнении объектов при помощи == идет сравнение по ссылкам. При сравнении по equals() идет сравнение по состояниям объектов.

**Свойства equals():**
- **Симметричность**: Для двух ссылок, a и b, a.equals(b) тогда и только тогда, когда b.equals(a)
- **Рефлексивность**: для любого заданного значения x, выражение x.equals(x) должно возвращать true. Заданного — имеется в виду такого, что x != null
- **Постоянство**: повторный вызов метода equals() должен возвращать одно и тоже значение до тех пор, пока какое-либо значение свойств объекта не будет изменено.
- **Транзитивность**: Если a.equals(b) и b.equals(c), то тогда a.equals(c);
- **Неравенство с null**: для любого объекта проверка a.equals(null) должна возвращать false.
- **Совместимость с hashCode()**: Два тождественно равных объекта должны иметь одно и то же значение hashCode().

При переопределении equals() обязательно нужно переопределить метод hashCode(). Равные объекты должны возвращать одинаковые хэш коды.

### **Контракт equals и hashcode:**
1. Если два объекта равны (т.е. метод equals() возвращает true), у них должен быть одинаковый хэш-код. Иначе наши методы будут лишены смысла.
	Проверка по hashCode(), как мы и сказали, должна идти первой для повышения быстродействия.
	Если хэш-коды будут разными, проверка вернет false, хотя объекты на самом деле равны (согласно нашему определению в методе equals()).
2. Если метод hashCode() вызывается несколько раз на одном и том же объекте, каждый раз он должен возвращать одно и то же число.
3. Правило 1 не работает в обратную сторону. Одинаковый хэш-код может быть у двух разных объектов.

### @Override Equals
1. Проверить на равенство ссылки объектов this и параметра метода o.
`if (this == o) return true`
2. Проверить, определена ли ссылка o, т. е. является ли она `null`. Если в дальнейшем при сравнении типов объектов будет использоваться оператор instanceof, этот пункт можно пропустить, т. к. этот параметр возвращает false в данном случае null instanceof Object.
3. Сравнить типы объектов `this` и `o` с помощью оператора `instanceof` или метода `getClass()`, руководствуясь описанием выше и собственным чутьем.
4. Если метод `equals` переопределяется в подклассе, не забудьте сделать вызов `super.equals(o)`
5. Выполнить преобразование типа параметра `o` к требуемому классу.
6. Выполнить сравнение всех значимых полей объектов:
- для примитивных типов (кроме float и double), используя оператор `\==`
- для ссылочных полей необходимо вызвать их метод `equals`
- для массивов можно воспользоваться перебором по циклу, либо методом `Arrays.equals()`
- для типов float и double необходимо использовать методы сравнения соответствующих оберточных классов `Float.compare()` и `Double.compare()`